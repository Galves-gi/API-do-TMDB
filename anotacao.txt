AXIOS
- o que Ã©?


- oq consegue fazer?

- onde usar?


- como usar?


EXPRESS
- o que Ã©?


- O que faz?


- Como usar?


DOTENV
- O QUE Ã‰?


--------------------------------------------------
MIDDLEWARE

Middleware Ã© uma funÃ§Ã£o que fica entre a requisiÃ§Ã£o e a resposta.

Ele intercepta a requisiÃ§Ã£o antes que ela chegue na rota final, podendo:

    âœ” Inspecionar req
    âœ” Alterar req e res
    âœ” Bloquear
    âœ” Registrar
    âœ” Fazer parsing
    âœ” AutenticaÃ§Ã£o
    âœ” Autorizar
    âœ” Validar
    âœ” Tratar erros

SituaÃ§Ã£o para usar?
    vÃ¡rias rota
    SeguranÃ§a
    Logs	
    Parsing	
    Validar token	
    Capturar erros



req â†’ dados do cliente

res â†’ resposta para o cliente

next() â†’ chama o prÃ³ximo middleware/rota

Se nÃ£o chamar next(), a cadeia para ali.

    function meuMiddleware(req, res, next) {
    console.log("Passou pelo middleware");
    next(); // continua
    }


MIDDLEWARE DE ERROS


Por quÃª usar req, res e next:
    - Mesmo que vocÃª nÃ£o use req e res dentro dele, eles precisam estar presentes para o Express entender que Ã© um middleware que recebe requisiÃ§Ã£o e encaminha adiante.
        âœ”ï¸ req â†’ dados da requisiÃ§Ã£o
        âœ”ï¸ res â†’ resposta
        âœ”ï¸ next(error) â†’ encaminha para middleware de erro

- Certifique-se de colocar o middleware apÃ³s as rotas. Se colocar antes, ele nunca serÃ¡ acionado.
    app.use("/api", router);

    // â¬‡ precisa vir depois das rotas
    app.use(errorHandler);


--------------------------------------------------

try....catch
catch:

    console.log(error.response?.data);

    ? Ã© o optional chaining no JavaScript:
        -> â€œAcesse a propriedade somente se ela existir.â€


--------------------------------------------------

HEADERS

Authorization: Bearer SEU_TOKEN_AQUI

Bearer : 
    A palavra â€œbearerâ€ vem do inglÃªs e quer dizer portador.
    EntÃ£o Bearer Token significa:

    Quem estiver portando este token tem permissÃ£o para acessar o recurso.


--------------------------------------------------

PADRÃƒO NBC - MODULE


--------------------------------------------------

SERVER


app.use(express.json())

    Por padrÃ£o, o Express nÃ£o sabe interpretar JSON sozinho.
    uzir o corpo (body) em objeto JS.

    Ã‰ um middleware do Express que faz o servidor entender JSON enviado (frontend, Postman, mobile, etc) no corpo da requisiÃ§Ã£o (req.body).

    Sem isso, o req.body vem undefined.

    Quando Ã© usado?
        - POST
        - PUT
        - PATCH
        E enviar dados no body.




app.all("*")

    - * captura qualquer rota que nÃ£o existe (versÃ£o express baixo de 5)

    - all captura qualquer mÃ©todo: GET, POST, PUT, DELETE, etc.

mesma soluÃ§Ã£o para express atual:
    app.use((req, res, next) => {
    const error = new Error("Rota nÃ£o encontrada");
    error.status = 404;
    next(error);
    });


--------------------------------------------------
Router()

Router() Ã© uma funÃ§Ã£o do Express que cria um mini-app, ou seja:
um objeto capaz de:

    âœ” criar rotas
    âœ” aplicar middlewares
    âœ” ser montado no app principal

Ele funciona como um subservidor para organizar endpoints.



ROTA COM PARÃ‚METROS

app.get("/filme/:id", async (req, res) => {
  ...
})
A vÃ­rgula estÃ¡ separando dois argumentos da funÃ§Ã£o app.get() OBRIGATÃ“RIOS: app.get(path, callback)

   1- Primeiro argumento(STRING):
    O caminho (rota) â†’ "/filme/:id" // minha rota, como a pessoa vai acessar meu site e receber a respota

   2- Segundo argumento(FUNÃ‡ÃƒO):
    A funÃ§Ã£o que serÃ¡ executada quando essa rota for chamada
    â†’ async (req, res) => { ... }

    - req â†’ informaÃ§Ãµes da requisiÃ§Ã£o

    - res â†’ objeto usado para responder




const id = req.params.id X const { id } = req.params

- O Express entende que o trecho :id Ã© uma variÃ¡vel na URL.
- o valor do :id vai para req.params
- const { id } Ã© destructuring:Guarda o valor e depois ele extrai sÃ³ a chave id do objeto params.




req.params, req.body e req.query

    ðŸ“Œ params â†’ parte fixa da URL â†’ /movie/:id
        â†’ Geralmente quando queremos acessar um recurso especÃ­fico. Quando o valor faz parte do caminho da rota.

    ðŸ“Œ query â†’ filtros na URL apÃ³s "?" â†’ ?search=batman
        â†’ SÃ£o parÃ¢metros opcionais â†’ usados para pesquisa, filtros, paginaÃ§Ã£oâ€¦

    ðŸ“Œ body â†’ dados enviados no POST/PUT
        - Usado para pegar dados enviados no corpo da requisiÃ§Ã£o. Ex: cadastro de usuÃ¡rio, loginâ€¦

EXEMPLOS:
    app.post("/login", (req, res) => {
        console.log(req.body);
    });

    Exemplo de JSON enviado do front:
    { 
    "email": "teste@email.com",
    "senha": "1234"
    }

    O que chega no backend?
    req.body = {
    email: "teste@email.com",
    senha: "1234"
    }