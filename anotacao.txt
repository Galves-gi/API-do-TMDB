AXIOS
- o que √©?
  Axios √© uma biblioteca JavaScript (cliente HTTP) que permite fazer requisi√ß√µes HTTP (GET, POST, PUT, DELETE, etc) para APIs externas.
  √â uma alternativa ao Fetch API com mais recursos e funcionalidades.

- oq consegue fazer?
  ‚úî Fazer requisi√ß√µes GET, POST, PUT, DELETE, PATCH
  ‚úî Enviar dados (JSON, form-data, etc)
  ‚úî Adicionar headers customizados
  ‚úî Interceptar requisi√ß√µes e respostas
  ‚úî Timeout de requisi√ß√µes
  ‚úî Cancelar requisi√ß√µes
  ‚úî Transformar dados automaticamente
  ‚úî Tratamento de erros melhorado

- onde usar?
  ‚úî Chamar APIs externas (como TMDB neste projeto)
  ‚úî Fazer requisi√ß√µes de dados entre frontend e backend
  ‚úî Autentica√ß√£o com tokens
  ‚úî Upload de arquivos
  ‚úî Qualquer lugar que precise de HTTP requests

- como usar?
  
  // Instala√ß√£o
  npm install axios
  
  // Importar
  import axios from "axios";
  
  // GET - buscar dados
  const response = await axios.get("https://api.exemplo.com/filmes");
  console.log(response.data);
  
  // POST - enviar dados
  const response = await axios.post("https://api.exemplo.com/usuarios", {
    nome: "Jo√£o",
    email: "joao@email.com"
  });
  
  // Com headers (como autentica√ß√£o)
  const response = await axios.get("https://api.exemplo.com/filmes", {
    headers: {
      Authorization: "Bearer SEU_TOKEN_AQUI"
    }
  });
  
  // Tratamento de erros
  try {
    const response = await axios.get("https://api.exemplo.com/filmes");
  } catch (error) {
    console.log("Erro:", error.response?.data);
  }

--------------------------------------------------

EXPRESS
- o que √©?
  Express √© um framework minimalista e flex√≠vel para Node.js que facilita a cria√ß√£o de servidores web e APIs REST.
  √â a base para criar endpoints, rotas, middlewares e manipular requisi√ß√µes HTTP.

- O que faz?
  ‚úî Criar um servidor HTTP
  ‚úî Definir rotas (GET, POST, PUT, DELETE, etc)
  ‚úî Aplicar middlewares
  ‚úî Receber e processar requisi√ß√µes (req.body, req.params, req.query)
  ‚úî Enviar respostas (res.json(), res.send(), etc)
  ‚úî Tratamento de erros centralizado
  ‚úî Servir arquivos est√°ticos (HTML, CSS, JS)

- Como usar?
  
  // Instala√ß√£o
  npm install express
  
  // Importar e criar servidor
  import express from "express";
  const app = express();
  const PORT = 8080;
  
  // Middleware para entender JSON
  app.use(express.json());
  
  // Rota GET simples
  app.get("/", (req, res) => {
    res.json({ mensagem: "Ol√°!" });
  });
  
  // Rota GET com par√¢metro
  app.get("/filme/:id", (req, res) => {
    const { id } = req.params;
    res.json({ filmeId: id });
  });
  
  // Rota POST - receber dados
  app.post("/usuarios", (req, res) => {
    const { nome, email } = req.body;
    res.json({ mensagem: "Usu√°rio criado", nome, email });
  });
  
  // Rota com query params (filtros)
  app.get("/pesquisa", (req, res) => {
    const { query } = req.query;
    res.json({ buscando: query });
  });
  
  // Iniciar servidor
  app.listen(PORT, () => {
    console.log(`Servidor rodando em http://localhost:${PORT}`);
  });

--------------------------------------------------

DOTENV
- O QUE √â?
  Dotenv √© um pacote que carrega vari√°veis de ambiente de um arquivo .env para process.env
  Permite armazenar informa√ß√µes sens√≠veis (API keys, senhas, tokens) sem expor no c√≥digo.

- PARA QUE SERVE?
  ‚úî Proteger dados sens√≠veis (n√£o colocar no GitHub)
  ‚úî Usar diferentes configura√ß√µes por ambiente (dev, produ√ß√£o)
  ‚úî Manter secrets seguros
  ‚úî Facilitar deploy em diferentes servidores

- COMO USAR?

  // Instala√ß√£o
  npm install dotenv
  
  // 1. Criar arquivo .env na raiz do projeto
  TMDB_API_KEY=sua_chave_secreta_aqui
  PORT=8080
  DATABASE_URL=mongodb://localhost:27017
  
  // 2. Importar e configurar no in√≠cio do arquivo
  import dotenv from "dotenv";
  dotenv.config();
  
  // 3. Acessar as vari√°veis
  const apiKey = process.env.TMDB_API_KEY;
  const port = process.env.PORT || 3000;
  
  // 4. N√£o esquecer de adicionar .env no .gitignore
  // Arquivo .gitignore
  .env
  node_modules/
  
  // EXEMPLO COMPLETO
  import axios from "axios";
  import dotenv from "dotenv";
  dotenv.config();
  
  const apiKey = process.env.TMDB_API_KEY;
  
  const response = await axios.get(
    `https://api.themoviedb.org/3/movie/550`,
    {
      headers: {
        Authorization: `Bearer ${apiKey}`
      }
    }
  );
  
  console.log(response.data);


--------------------------------------------------

express-rate-limit

√â um middleware que limita o n√∫mero de requisi√ß√µes que um cliente pode fazer √† sua API em um determinado tempo.

    ‚û°Ô∏è Evita abuso / ataques (DoS, brute force)
    ‚û°Ô∏è Protege seu servidor
    ‚û°Ô∏è Diminui custo (menos chamadas ao TMDB, por exemplo)

    import rateLimit from "express-rate-limit";

    const limiter = rateLimit({
    windowMs: 15 * 60 * 1000,
    max: 100,
    });

    app.use(limiter);
* Cada cliente pode fazer no m√°ximo 100 requisi√ß√µes a cada 15 minutos.

Explica√ß√£o detalhada

    import rateLimit ---->	                Importa o pacote
    const limiter = rateLimit({...}) ---->	Cria configura√ß√£o
    windowMs: 15 * 60 * 1000 ---->	        Tempo da janela ‚Üí 15 minutos
    max: 100 ---->	                        M√°ximo permitido ‚Üí 100 requisi√ß√µes
    app.use(limiter) ---->	                Aplica o limitador em todas as rotas

--------------------------------------------------

PROTEGER BACKEND CONTRA INJE√á√ïES

xss-clean

XSS (Cross-Site Scripting)
√â quando algu√©m envia c√≥digo malicioso (como <script>alert("hack")</script>) para ser executado no navegador de outros usu√°rios.

O que xss-clean faz?

    ‚úî Remove tags e scripts maliciosos
    ‚úî Limpa dados de entrada
    ‚úî Evita execu√ß√£o de c√≥digo inserido pelo usu√°rio

Como funciona na pr√°tica
    üîπ Ele roda antes das rotas
    üîπ Inspeciona req.body, req.query, req.params
    üîπ Remove conte√∫do malicioso

express-mongo-sanitize ‚Üí √© mais √∫til em apps que usam Mongo/Mongoose. Por√©m, √© √∫til para sanitizar inputs de pesquisa.

    Se o backend n√£o sanitiza isso ($gt, $set, $or, .), pode:
    ‚úÖ Logar sem senha
    ‚úÖ Alterar dados
    ‚úÖ Expor informa√ß√µes

O que mongoSanitize() faz?

    ‚úî Remove operadores iniciados com $ e .
    ‚úî Impede inje√ß√£o nas queries

--------------------------------------------------

As retic√™ncias ... 

{
  ...dadosInformacoesFilme,
  poster_url: posterURL
}


se chamam "spread operator" (operador de espalhamento).

√â um recurso do JavaScript que permite espalhar (copiar) todas as propriedades de um objeto, array ou iter√°vel, dentro de outro objeto/array.

    - Pega todos os dados retornados da API do TMDB

    - Espalha dentro desse novo objeto

    - Adiciona a chave extra poster_url

--------------------------------------------------

MIDDLEWARE

Middleware √© uma fun√ß√£o que fica entre a requisi√ß√£o e a resposta.

Ele intercepta a requisi√ß√£o antes que ela chegue na rota final, podendo:

    ‚úî Inspecionar req
    ‚úî Alterar req e res
    ‚úî Bloquear
    ‚úî Registrar
    ‚úî Fazer parsing
    ‚úî Autentica√ß√£o
    ‚úî Autorizar
    ‚úî Validar
    ‚úî Tratar erros

Situa√ß√£o para usar?
    v√°rias rota
    Seguran√ßa
    Logs	
    Parsing	
    Validar token	
    Capturar erros



req ‚Üí dados do cliente

res ‚Üí resposta para o cliente

next() ‚Üí chama o pr√≥ximo middleware/rota

Se n√£o chamar next(), a cadeia para ali.

    function meuMiddleware(req, res, next) {
    console.log("Passou pelo middleware");
    next(); // continua
    }


MIDDLEWARE DE ERROS


Por qu√™ usar req, res e next:
    - Mesmo que voc√™ n√£o use req e res dentro dele, eles precisam estar presentes para o Express entender que √© um middleware que recebe requisi√ß√£o e encaminha adiante.
        ‚úîÔ∏è req ‚Üí dados da requisi√ß√£o
        ‚úîÔ∏è res ‚Üí resposta
        ‚úîÔ∏è next(error) ‚Üí encaminha para middleware de erro

- Certifique-se de colocar o middleware ap√≥s as rotas. Se colocar antes, ele nunca ser√° acionado.
    app.use("/api", router);

    // ‚¨á precisa vir depois das rotas
    app.use(errorHandler);


--------------------------------------------------

try....catch
catch:

    console.log(error.response?.data);

    ? √© o optional chaining no JavaScript:
        -> ‚ÄúAcesse a propriedade somente se ela existir.‚Äù


--------------------------------------------------

HEADERS

Authorization: Bearer SEU_TOKEN_AQUI

Bearer : 
    A palavra ‚Äúbearer‚Äù vem do ingl√™s e quer dizer portador.
    Ent√£o Bearer Token significa:

    Quem estiver portando este token tem permiss√£o para acessar o recurso.


--------------------------------------------------

SERVER


app.use(express.json())

    Por padr√£o, o Express n√£o sabe interpretar JSON sozinho.
    uzir o corpo (body) em objeto JS.

    √â um middleware do Express que faz o servidor entender JSON enviado (frontend, Postman, mobile, etc) no corpo da requisi√ß√£o (req.body).

    Sem isso, o req.body vem undefined.

    Quando √© usado?
        - POST
        - PUT
        - PATCH
        E enviar dados no body.




app.all("*")

    - * captura qualquer rota que n√£o existe (vers√£o express baixo de 5)

    - all captura qualquer m√©todo: GET, POST, PUT, DELETE, etc.

mesma solu√ß√£o para express atual:
    app.use((req, res, next) => {
    const error = new Error("Rota n√£o encontrada");
    error.status = 404;
    next(error);
    });


--------------------------------------------------
Router()

Router() √© uma fun√ß√£o do Express que cria um mini-app, ou seja:
um objeto capaz de:

    ‚úî criar rotas
    ‚úî aplicar middlewares
    ‚úî ser montado no app principal

Ele funciona como um subservidor para organizar endpoints.



ROTA COM PAR√ÇMETROS

app.get("/filme/:id", async (req, res) => {
  ...
})
A v√≠rgula est√° separando dois argumentos da fun√ß√£o app.get() OBRIGAT√ìRIOS: app.get(path, callback)

   1- Primeiro argumento(STRING):
    O caminho (rota) ‚Üí "/filme/:id" // minha rota, como a pessoa vai acessar meu site e receber a respota

   2- Segundo argumento(FUN√á√ÉO):
    A fun√ß√£o que ser√° executada quando essa rota for chamada
    ‚Üí async (req, res) => { ... }

    - req ‚Üí informa√ß√µes da requisi√ß√£o

    - res ‚Üí objeto usado para responder




const id = req.params.id X const { id } = req.params

- O Express entende que o trecho :id √© uma vari√°vel na URL.
- o valor do :id vai para req.params
- const { id } √© destructuring:Guarda o valor e depois ele extrai s√≥ a chave id do objeto params.




req.params, req.body e req.query

    üìå params ‚Üí parte fixa da URL ‚Üí /movie/:id
        ‚Üí Geralmente quando queremos acessar um recurso espec√≠fico. Quando o valor faz parte do caminho da rota.

    üìå query ‚Üí filtros na URL ap√≥s "?" ‚Üí ?search=batman
        ‚Üí S√£o par√¢metros opcionais ‚Üí usados para pesquisa, filtros, pagina√ß√£o‚Ä¶

    üìå body ‚Üí dados enviados no POST/PUT
        - Usado para pegar dados enviados no corpo da requisi√ß√£o. Ex: cadastro de usu√°rio, login‚Ä¶

EXEMPLOS:
    app.post("/login", (req, res) => {
        console.log(req.body);
    });

    Exemplo de JSON enviado do front:
    { 
    "email": "teste@email.com",
    "senha": "1234"
    }

    O que chega no backend?
    req.body = {
    email: "teste@email.com",
    senha: "1234"
    }